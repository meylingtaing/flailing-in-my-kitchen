#!/bin/bash

PWD=`pwd`
cd public/css

for file in *.css
do
    base_filename=`basename $file`
    new_filename=$(perl -e "
        '$base_filename' =~ /([a-z]*)(\d+).css/;
        my \$num = \$2 + 1;
        print \$1 . \$num .  '.css';
    ")
    sed -i "s/${base_filename}/${new_filename}/g" \
        ../../templates/layouts/page_wrapper.html.ep
    git mv $base_filename $new_filename
    git add $new_filename
done

git add ../../templates/layouts/page_wrapper.html.ep
git commit -m "Updated CSS files (autogenerated message)"

cd $PWD
